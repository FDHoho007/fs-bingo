/**
 * Renders the game field and from the array that is being generated by the getContent function.
 */
async function renderGameField() {

    // array containing sqr(n) strings of possible options to chose from
    let options = [];

    try {
        options = await getContent();
    } catch (e) {
        if (e instanceof InvalidSubdomainError) {
            alert("Diese Seite ist nicht bekannt.")
            return;
        }

        if (e instanceof InvalidConfigurationError) {
            alert("Geladene daten haben kein valides Format.")
            return;
        }
    }

    // both width and height of game field since options has length sqr(n)
    const width = Math.sqrt(options.length);
    // table representing the game board
    const gameBoard = document.getElementById("board");
    // clear the game board
    gameBoard.innerHTML = "";

    for (let i = 0; i < width; i++) {
        const row = document.createElement("div");
        for (let j = 0; j < width; j++) {
            const cell = document.createElement("div");
            const text = document.createElement("p");
            text.innerText = options.pop().toString();
            cell.classList = "cell";
            cell.onclick = (e) => clickField(cell);
            cell.appendChild(text);
            row.appendChild(cell);
        }
        gameBoard.appendChild(row);
    }
}

function renderTitle() {
    const name = getSubdomain().toLowerCase();
    document.getElementById("title").innerText = "Fachschaftsbingo! Heute mit " + name[0].toUpperCase()
        + name.slice(1);
}

function win() {
    //alert("Yeah du hast alles! BINGO!")
    spawnConfetti();
}

if (location.hostname === "fs.bingo") {
    location.href = "https://github.com/FDHoho007/fs-bingo";
}
else {
    // start to render the ui now
    renderGameField();
    renderTitle();
}